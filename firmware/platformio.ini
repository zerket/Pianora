[env:esp32-s3-diag]
platform = espressif32@6.10.0
board = esp32-s3-devkitc-1
framework = arduino

; Board config
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L

; Flash - use default partitions (comment out for OTA later)
board_build.flash_mode = dio
board_build.flash_size = 16MB
; board_build.partitions = partitions_ota.csv
board_build.filesystem = littlefs

; USB Host mode - Serial still works via UART (COM port)
build_flags =
    -DARDUINO_USB_MODE=0
    -DARDUINO_USB_CDC_ON_BOOT=0
    -DFW_VERSION=\"0.6.0\"
    -fpermissive

; Serial monitor
monitor_speed = 115200
monitor_rts = 0
monitor_dtr = 0

; Upload
upload_speed = 921600

lib_deps =
    mathieucarbou/Async TCP@^3.1.4
    mathieucarbou/ESP Async WebServer@^3.0.6
    fastled/FastLED@^3.7.0
    h2zero/NimBLE-Arduino@^2.2.0
    bblanchon/ArduinoJson@^7.0.0

lib_ignore =
    AsyncTCP_RP2040W
    ESPAsyncTCP-esphome
    ESPAsyncWebServer

; ========================================
; MINIMAL TEST - absolutely minimal build
; No libs, no custom partitions, just blink
; ========================================
[env:esp32-s3-minimal]
platform = espressif32@6.10.0
board = esp32-s3-devkitc-1
framework = arduino

board_build.mcu = esp32s3
board_build.f_cpu = 240000000L
board_build.flash_mode = dio
board_build.flash_size = 16MB

; Use default partitions first
; board_build.partitions = default.csv

; No USB flags - let framework handle it
build_flags =
    -DFW_VERSION=\"0.6.0-minimal\"

monitor_speed = 115200
upload_speed = 921600

lib_deps =
    mathieucarbou/Async TCP@^3.1.4
    mathieucarbou/ESP Async WebServer@^3.0.6
    fastled/FastLED@^3.7.0
    h2zero/NimBLE-Arduino@^2.2.0
lib_ignore =
    AsyncTCP_RP2040W
    ESPAsyncTCP-esphome
